{% extends 'dashboard.html' %}
{% load static %}
{% block styles %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/dashboard.css' %}">
    <link href="{% static 'calender/main.css' %}" rel="stylesheet" />
{% endblock %}
{% block dynamic_content %}
    <div class="row">
        <div class="col-md-3.5">
            <div class="event-list">
                <h4>Current Events</h4>
                <ul class="event-list-items">
                    {% for event in object_list %}
                        <li>
                            <div class="fc-event">
                                <h3>{{ event.title }}</h3>
                                <p>{{ event.start_date|date:"F d, Y H:i" }} - {{ event.end_date|date:"F d, Y H:i" }}</p>
                                
                            </div>
                        </li>
                    {% empty %}
                        <p>No Events Found</p>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-md-9">
            <div class="calendar-section">
                <div id="calendar"></div>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    var calendarEl = document.getElementById('calendar');
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        // Konfiguracja kalendarza
                        headerToolbar: {
                            left: 'prev,next today',
                            center: 'title',
                            right: 'dayGridMonth,timeGridWeek,timeGridDay'
                        },
                        initialView: 'dayGridMonth',
                        eventDisplay: 'block', 
                        events: {{ events_json|safe }},
                        eventContent: function(arg) {
                            return {
                                html: '<h8 style="color: white;">' + arg.event.title + '</h8>',
                                backgroundColor: arg.event.extendedProps.color,
                                borderColor: arg.event.extendedProps.color
                            };
                        },
                    });
                    
                    calendar.render();
                });
            </script>
        </div>
    </div>
{% endblock %}
